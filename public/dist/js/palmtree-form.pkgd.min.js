!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof module&&module.exports?module.exports=t(require("jquery")):t(jQuery)}(function(n){"use strict";var o="bsAlert",i={},r=-1,s={destroy:function(){this.clear();var t=this.$el.data(o+".id");this.$el.removeData(o+".id"),delete i[t]},show:function(){n.isFunction(this.options.position)?this.options.position.call(this,this.getAlert()):"after"===this.options.position?this.$el.after(this.getAlert()):this.$el.before(this.getAlert())},clear:function(){i[this.$el.data(o+".id")].$alert.remove()}};function a(t,e,i){t.data(o+".id",i),this.$el=t,this.$alert=null,this.options=n.extend({},n.fn[o].defaults,e),this.show()}return a.prototype=n.extend({},s,{getAlert:function(){var t=n("<div />").attr("role","alert").addClass("alert alert-"+this.options.type).append(document.createTextNode(" "+this.getContent(this.options.content)));return this.options.icons&&this.options.icons[this.options.type]&&t.prepend(n("<span />").addClass(this.options.icons[this.options.type])),this.options.dismissible&&t.addClass("alert-dismissible").append(n("<button />").attr({type:"button","data-dismiss":"alert","aria-label":"Close",class:"close"}).html('<span aria-hidden="true">&times;</span>')),this.$alert=t},getContent:function(t){return n.isFunction(t)?t.call(this):t}}),n.fn[o]=function(){var t=arguments,e=this.data(o+".id");if(void 0===e&&(e=++r),i.hasOwnProperty(e)){if("string"==typeof t[0]&&n.isFunction(s[t[0]]))return s[t[0]].apply(i[e],Array.prototype.slice.call(t,1));i[e].destroy()}"object"!=typeof t[0]&&(t[0]={type:t[0],content:t[1]}),i[e]=new a(this,t[0],e)},n.fn[o].defaults={type:"danger",content:"",dismissible:!1,position:"before",icons:{danger:"fa fa-exclamation-circle",warning:"fa fa-question-circle",info:"fa fa-info-circle",success:"fa fa-check-circle"}},n.fn[o]}),function(t){"use strict";"undefined"!=typeof define&&define.amd?define(["jquery"],t):"object"==typeof module&&module.exports&&"function"==typeof require?module.exports=t(require("jquery")):t(window.jQuery)}(function(t){"use strict";t(function(){t(".palmtree-form").on("change",".custom-file-input",function(){t(this).next(".custom-file-label").html(this.files[0].name)})})}),function(t){"use strict";"undefined"!=typeof define&&define.amd?define(["jquery"],t):"object"==typeof module&&module.exports&&"function"==typeof require?module.exports=t(require("jquery")):t(window.jQuery)}(function(n){"use strict";n(function(){n(".palmtree-form").each(function(){n(this).find(".g-recaptcha-autoload").palmtreeRecaptcha(this)})});var e="palmtreeRecaptcha";function i(t,e){this.$el=n(t),this.$form=n(e);var i=this;window[this.$el.data("onload")]=function(){var t=window.grecaptcha.render(i.$el.attr("id"),{sitekey:i.$el.data("site_key"),callback:function(t){var e=n("#"+i.$el.data("form_control"));e.val(t),i.$form.palmtreeForm("isInitialized")&&i.$form.palmtreeForm("clearState",e)}});i.$form.on("error.palmtreeForm success.palmtreeForm",function(){window.grecaptcha.reset(t)})},n.getScript(this.$el.data("script_url"))}return n.fn[e]=function(t){return this.each(function(){n(this).data(e)||n(this).data(e,new i(this,t))})},n.fn[e]}),function(t){"use strict";"undefined"!=typeof define&&define.amd?define(["jquery"],t):"object"==typeof module&&module.exports&&"function"==typeof require?module.exports=t(require("jquery")):t(window.jQuery)}(function(o){"use strict";var r="palmtreeFormCollection";function i(t,e){this.$collection=o(t),this.$entriesWrapper=this.$collection.children(".palmtree-form-collection-entries"),this.options=o.extend(!0,{},o.fn[r].defaults,e),this.$collection.data("index",this.$entriesWrapper.children().length),this.$addEntryLink=o('<button type="button" class="add-entry-link btn btn-primary">'+this.options.labels.add+"</button>"),this.removeEntryLink='<button type="button" class="remove-entry-link btn btn-sm btn-danger">'+this.options.labels.remove+"</button>";var i=this;this.$entriesWrapper.children().each(function(){i.addRemoveLink(o(this))}),this.$collection.on("click",".remove-entry-link",function(t){t.preventDefault(),t.stopPropagation(),i.removeEntry(o(this).closest(".palmtree-form-collection-entry"))}),this.$collection.after(this.$addEntryLink),this.$addEntryLink.on("click",function(t){t.preventDefault(),i.addEntry()});for(var n=this.getTotalEntries();n<this.options.minEntries;n++)this.addEntry();this.hasMaxEntries()&&this.$addEntryLink.addClass("disabled")}i.prototype={addEntry:function(){if(this.hasMaxEntries())return!1;var t=this.$collection.data("index"),e=this.options.prototype||this.$collection.data("prototype").replace(/\[-1]/g,"["+t+"]").replace(/(id|for)="([^\s]+)--1"/g,'$1="$2-'+t+'"'),e=o(e);e.data("index",this.$collection.data("index")),this.addRemoveLink(e),this.$entriesWrapper.append(e),this.$collection.data("index",t+1),this.$collection.trigger("addedEntry.palmtreeFormCollection",[e,this]),this.hasMaxEntries()&&this.$addEntryLink.addClass("disabled")},removeEntry:function(t){this.options.minEntries!==this.getTotalEntries()&&(this.$collection.triggerHandler("removeEntry.palmtreeFormCollection",[t,this]),t.remove(),this.$collection.triggerHandler("removedEntry.palmtreeFormCollection",[this]),this.hasMaxEntries()||this.$addEntryLink.removeClass("disabled"))},addRemoveLink:function(t){t.append(o(this.removeEntryLink))},getTotalEntries:function(){return this.$entriesWrapper.children().length},hasMaxEntries:function(){return-1<this.options.maxEntries&&this.getTotalEntries()>=this.options.maxEntries}},o.fn[r]=function(){var e=arguments;return this.each(function(){var t=o(this).data(r);t||(t=new i(this,e[0]),o(this).data(r,t)),"string"==typeof e[0]&&t[e[0]].apply(t,Array.prototype.slice.call(e,1))})},o.fn[r].defaults={prototype:null,labels:{add:"Add Entry",remove:"Remove"},minEntries:0,maxEntries:-1}}),function(t){"use strict";"undefined"!=typeof define&&define.amd?define(["jquery"],t):"object"==typeof module&&module.exports&&"function"==typeof require?module.exports=t(require("jquery")):t(jQuery)}(function(s){"use strict";s(function(){s(".palmtree-form").each(function(){s(this).hasClass("is-ajax")&&s(this).palmtreeForm()})});var n="palmtreeForm";function i(t,e){this.$form=s(t),this.$submitButton=this.$form.find("[type=submit]").last(),this.options=s.extend({},s.fn[n].defaults,e);var i=this;this.$form.on("submit.palmtreeForm",function(t){t.preventDefault(),i.onSubmit()})}var o={clearState:function(t){this.setState(t,"")},setState:function(t,n){var o=this;t.each(function(){for(var t=s(this),e=s(this).closest(".form-group").find(".palmtree-invalid-feedback"),i=0;i<o.options.controlStates.length;i++)t.removeClass("is-"+o.options.controlStates[i]);n?-1<o.options.controlStates.indexOf(n)&&(t.addClass("is-"+n),e.show()):e.hide(),o.$form.trigger(o.getEvent("statechange"),{$formControl:t,state:n})})}};return i.prototype=s.extend({},o,{onSubmit:function(){var t=this,e=this.$form,i=this.$submitButton;e.addClass("is-submitting"),i.addClass("disabled").prop("disabled",!0),e.trigger(this.getEvent("beforeSend"));var n=s.ajax({url:e.attr("action")||t.options.url,type:t.$form.prop("method")||t.options.method,dataType:t.options.dataType,data:e.serialize(),context:t});n.done(t.handleResponse).always(function(){e.removeClass("is-submitting"),i.removeClass("disabled").prop("disabled",!1)}),e.trigger(this.getEvent("promise"),{promise:n})},handleResponse:function(t){var e=this;if(!t||void 0===t.data)throw new Error("Invalid response");var i=e.$form.find(".palmtree-form-control");if(e.clearState(i),t.success)return i.filter(":visible").val(""),t.data.message&&e.showAlert(t.data.message,"success"),e.options.removeSubmitButton&&e.$submitButton.remove(),e.$form.trigger(this.getEvent("success"),{responseData:t.data}),!0;var n=t.data.errors||null;return e.setControlStates(i,n),i.filter(".is-invalid").first().trigger("focus"),t.data.message&&e.showAlert(t.data.message,"danger"),e.$form.trigger(this.getEvent("error"),{responseData:t.data}),!1},setControlStates:function(t,o){var r=this;t.each(function(){var e=s(this),t=e.data("name"),i=e.closest(".form-group"),n=i.find(".palmtree-invalid-feedback");o&&t&&void 0!==o[t]?((n=!n.length?s(r.$form.data("invalid_element")):n).html(o[t]),i.append(n),r.setState(e,"invalid"),s(this).off("input.palmtreeForm change.palmtreeForm").on("input.palmtreeForm change.palmtreeForm",function(){var t=s(this).val().length?"":"invalid";r.setState(e,t)})):r.clearState(e)})},getEvent:function(t,e){e=new s.Event(t,e);return e.namespace=n,e.form=this,e},showAlert:function(t,e){var i=this;this.$form.bsAlert({content:t,type:e,position:function(t){i.$submitButton.before(t)}})}}),s.fn[n]=function(){var e=arguments;return"isInitialized"===e[0]?!!s(this).data(n):this.each(function(){var t=s(this).data(n);t||(t=new i(this,e[0]),s(this).data(n,t)),"string"==typeof e[0]&&s.isFunction(o[e[0]])&&t[e[0]].apply(t,Array.prototype.slice.call(e,1))})},s.fn[n].defaults={url:"",method:"GET",dataType:"json",removeSubmitButton:!0,controlStates:["valid","invalid"]},s.fn[n]});
